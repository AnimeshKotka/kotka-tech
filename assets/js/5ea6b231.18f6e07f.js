"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[48],{3321:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"AWS-Solutions-Associate-Architect-Associate/EC2/EC2","title":"EC2 Fundamentals","description":"Before Starting EC2, create a budget plan from Bill and Cost management","source":"@site/docs/AWS-Solutions-Associate-Architect-Associate/EC2/EC2.mdx","sourceDirName":"AWS-Solutions-Associate-Architect-Associate/EC2","slug":"/AWS-Solutions-Associate-Architect-Associate/EC2/","permalink":"/kotka-tech/docs/AWS-Solutions-Associate-Architect-Associate/EC2/","draft":false,"unlisted":false,"editUrl":"https://github.com/AnimeshKotka/kotka-tech/tree/main/docs/AWS-Solutions-Associate-Architect-Associate/EC2/EC2.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"EC2 Fundamentals","sidebar_position":1,"toc_min_heading_level":2,"toc_max_heading_level":6},"sidebar":"tutorialSidebar","previous":{"title":"Elastic Compute Cloud (EC2)","permalink":"/kotka-tech/docs/category/elastic-compute-cloud-ec2"},"next":{"title":"EC2 Solution Architect Associate","permalink":"/kotka-tech/docs/AWS-Solutions-Associate-Architect-Associate/EC2/EC2-advance"}}');var t=s(4848),l=s(8453),c=s(4252),r=s(6012);const a={title:"EC2 Fundamentals",sidebar_position:1,toc_min_heading_level:2,toc_max_heading_level:6},o=void 0,d={},h=[{value:"User Data",id:"user-data",level:2},{value:"Instance Classes",id:"instance-classes",level:2},{value:"Security Groups",id:"security-groups",level:2},{value:"SSH",id:"ssh",level:2},{value:"Steps to connect:",id:"steps-to-connect",level:3},{value:"IAM Roles for EC2 instances",id:"iam-roles-for-ec2-instances",level:2},{value:"Purchasing Options",id:"purchasing-options",level:2},{value:"On-demand Instances",id:"on-demand-instances",level:3},{value:"Standard Reserved Instances",id:"standard-reserved-instances",level:3},{value:"Convertible Reserved Instances",id:"convertible-reserved-instances",level:3},{value:"Scheduled Reserved Instances",id:"scheduled-reserved-instances",level:3},{value:"Spot Instances",id:"spot-instances",level:3},{value:"Dedicated Hosts",id:"dedicated-hosts",level:3},{value:"Dedicated Instances",id:"dedicated-instances",level:3},{value:"On-Demand Capacity Reservations",id:"on-demand-capacity-reservations",level:3},{value:"Examples",id:"examples",level:2},{value:"Connect to EC2 using ssh key",id:"connect-to-ec2-using-ssh-key",level:3}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.A,{toc:h,minHeadingLevel:2,maxHeadingLevel:6}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsx)(n.p,{children:"Before Starting EC2, create a budget plan from Bill and Cost management"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Regional Service"}),"\n",(0,t.jsx)(n.li,{children:"EC2 (Elastic Compute Cloud) is an Infrastructure as a Service (IaaS)"}),"\n",(0,t.jsx)(n.li,{children:"Stopping & Starting an instance may change its public IP but not its private IP"}),"\n",(0,t.jsx)(n.li,{children:"AWS Compute Optimizer recommends optimal AWS Compute resources for your workloads"}),"\n",(0,t.jsx)(n.li,{children:"There is a vCPU-based On-Demand Instance soft limit per region"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"user-data",children:"User Data"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Some commands that run when the instance is launched for the first time (doesn't execute for subsequent runs)"}),"\n",(0,t.jsxs)(n.li,{children:["Used to automate dynamic boot tasks (that cannot be done using AMIs)","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Installing updates"}),"\n",(0,t.jsx)(n.li,{children:"Installing software"}),"\n",(0,t.jsx)(n.li,{children:"Downloading common files from the internet"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Runs with the root user privilege"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"instance-classes",children:"Instance Classes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["General Purpose","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Great for a diversity of workloads such as web servers or code repositories"}),"\n",(0,t.jsx)(n.li,{children:"Balance between compute, memory & networking"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Compute Optimized","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Great for compute intensive tasks","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Batch Processing"}),"\n",(0,t.jsx)(n.li,{children:"Media Transcoding"}),"\n",(0,t.jsx)(n.li,{children:"HPC"}),"\n",(0,t.jsx)(n.li,{children:"Gaming Servers"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Memory Optimized","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Great for in-memory databases or distributed web caches"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Storage Optimized","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Great for storage intensive tasks (accessing local databases)","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"OLTP systems"}),"\n",(0,t.jsx)(n.li,{children:"Distributed File System (DFS)"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Other type of instances may exist buth only the most important once have been discussed here"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"EC2 Types",src:s(525).A+"",width:"1229",height:"619"})}),"\n",(0,t.jsx)(n.h2,{id:"security-groups",children:"Security Groups"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Only contain Allow rules"}),"\n",(0,t.jsx)(n.li,{children:"External firewall for EC2 instances (if a request is blocked by SG, instance will never know)"}),"\n",(0,t.jsx)(n.li,{children:"Security groups rules can reference a resource by IP or Security Group"}),"\n",(0,t.jsxs)(n.li,{children:["Default SG","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"inbound traffic from the same SG is allowed"}),"\n",(0,t.jsx)(n.li,{children:"all outbound traffic is allowed"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["New SG","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["all inbound traffic is ",(0,t.jsx)(r.A,{color:"#FF5733",children:"blocked"})]}),"\n",(0,t.jsxs)(n.li,{children:["all outbound traffic is ",(0,t.jsx)(r.A,{color:"#008000",children:"allowed"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"A security group can be attached to multiple instances and vice versa"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"EC2 Types",src:s(5104).A+"",width:"1229",height:"619"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Using this we can communicate with new instances without mapping with IPs (in Load Balancing)"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Bound to a VPC (and hence to a region)"}),"\n",(0,t.jsx)(n.li,{children:"Recommended to maintain a separate security group for SSH access"}),"\n",(0,t.jsx)(n.li,{children:"Blocked requests will give a Time Out error"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"ssh",children:"SSH"}),"\n",(0,t.jsx)(n.p,{children:"Using SSH we can connect out ec2 instance."}),"\n",(0,t.jsx)(n.h3,{id:"steps-to-connect",children:"Steps to connect:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Create a key pair.","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"you can create key pair while creating instance or later create it from Network & Security section and download it."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Check security group has rule for SSH. It not then add a new rule for SSH source should 0.0.0.0/0."}),"\n",(0,t.jsxs)(n.li,{children:["locate .pem file give to permission using ",(0,t.jsx)(n.code,{children:"sudo chmod 400 <your_file_name>.pem"})]}),"\n",(0,t.jsxs)(n.li,{children:["Run this to connect EC2:  ",(0,t.jsx)(n.code,{children:'ssh -i "<your_file_name>.pem" <user>@<public_ip>'})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"iam-roles-for-ec2-instances",children:"IAM Roles for EC2 instances"}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["Never enter AWS credentials into the EC2 instance, instead attach ",(0,t.jsx)(n.a,{href:"/docs/AWS-Solutions-Associate-Architect-Associate/IAM",children:"IAM"})," Roles to the instances"]})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"Create a AWS role (SSMRole) which use existing policy AmazonSSMManagedInstanceCore"})}),"\n",(0,t.jsx)(n.h2,{id:"purchasing-options",children:"Purchasing Options"}),"\n",(0,t.jsx)(n.h3,{id:"on-demand-instances",children:"On-demand Instances"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Pay per use (no upfront payment)"}),"\n",(0,t.jsx)(n.li,{children:"Highest cost"}),"\n",(0,t.jsx)(n.li,{children:"No long-term commitment"}),"\n",(0,t.jsx)(n.li,{children:"Recommended for short-term, uninterrupted and unpredictable workloads"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"standard-reserved-instances",children:"Standard Reserved Instances"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Reservation Period: 1 year or 3 years"}),"\n",(0,t.jsx)(n.li,{children:"Recommended for steady-state applications (like database)"}),"\n",(0,t.jsx)(n.li,{children:"Sell unused instances on the Reserved Instance Marketplace"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"convertible-reserved-instances",children:"Convertible Reserved Instances"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Can change the instance type"}),"\n",(0,t.jsx)(n.li,{children:"Lower discount"}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Cannot sell unused instances on the Reserved Instance Marketplace"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"scheduled-reserved-instances",children:"Scheduled Reserved Instances"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"reserved for a time window (ex. everyday from 9AM to 5PM)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"spot-instances",children:"Spot Instances"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Work on a bidding basis where you are willing to pay a specific max hourly rate for the instance. Your instance can terminate if the spot price increases."}),"\n",(0,t.jsx)(n.li,{children:"Spot blocks are designed not to be interrupted"}),"\n",(0,t.jsx)(n.li,{children:"Good for workloads that are resilient to failure"}),"\n",(0,t.jsx)(n.li,{children:"Distributed jobs (resilient if some nodes go down)"}),"\n",(0,t.jsx)(n.li,{children:"Batch jobs"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dedicated-hosts",children:"Dedicated Hosts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Server hardware is allocated to a specific company (not shared with other companies)"}),"\n",(0,t.jsx)(n.li,{children:"3 year reservation period"}),"\n",(0,t.jsx)(n.li,{children:"Billed per host"}),"\n",(0,t.jsx)(n.li,{children:"Useful for software that have BYOL (Bring Your Own License) or for companies that have strong regulatory or compliance needs"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dedicated-instances",children:"Dedicated Instances"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Dedicated hardware"}),"\n",(0,t.jsx)(n.li,{children:"Billed per instance"}),"\n",(0,t.jsx)(n.li,{children:"No control over instance placement"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"on-demand-capacity-reservations",children:"On-Demand Capacity Reservations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure you have the available capacity in an AZ to launch EC2 instances when needed"}),"\n",(0,t.jsx)(n.li,{children:"Can reserve for a recurring schedule (ex. everyday from 9AM to 5PM)"}),"\n",(0,t.jsx)(n.li,{children:"No need for 1 or 3-year commitment (independent of billing discounts)"}),"\n",(0,t.jsx)(n.li,{children:"Need to specify the following to create capacity reservation: - AZ - Number of instances - Instance attributes"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.h3,{id:"connect-to-ec2-using-ssh-key",children:"Connect to EC2 using ssh key"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"generate ssh key"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"ssh-keygen -t rsa -f ec2_connect\n"})}),"\n",(0,t.jsx)(n.p,{children:"this will create a ec2_connect file"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check aws instance"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"aws ec2 describe-instances --region ap-south-1\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Send ssh key to instance"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"aws ec2-instance-connect send-ssh-public-key \\\n    --instance-id i-012637e47ba8c98d7 \\\n    --instance-os-user ec2-user \\\n    --availability-zone ap-south-1a \\\n    --ssh-public-key file://ec2_connect.pub \\\n    --region ap-south-1\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Give permission to ec2connect file"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"chmod 400 ec2_connect\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Connect with ssh"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"ssh -i ec2_connect ec2-user@<ip>\n"})})]})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},4252:(e,n,s)=>{s.d(n,{A:()=>c});s(6540);var i=s(5195);const t={tableOfContentsInline:"tableOfContentsInline_prmo"};var l=s(4848);function c(e){let{toc:n,minHeadingLevel:s,maxHeadingLevel:c}=e;return(0,l.jsx)("div",{className:t.tableOfContentsInline,children:(0,l.jsx)(i.A,{toc:n,minHeadingLevel:s,maxHeadingLevel:c,className:"table-of-contents",linkClassName:null})})}},5195:(e,n,s)=>{s.d(n,{A:()=>p});var i=s(6540),t=s(6342);function l(e){const n=e.map((e=>({...e,parentIndex:-1,children:[]}))),s=Array(7).fill(-1);n.forEach(((e,n)=>{const i=s.slice(2,e.level);e.parentIndex=Math.max(...i),s[e.level]=n}));const i=[];return n.forEach((e=>{const{parentIndex:s,...t}=e;s>=0?n[s].children.push(t):i.push(t)})),i}function c(e){let{toc:n,minHeadingLevel:s,maxHeadingLevel:i}=e;return n.flatMap((e=>{const n=c({toc:e.children,minHeadingLevel:s,maxHeadingLevel:i});return function(e){return e.level>=s&&e.level<=i}(e)?[{...e,children:n}]:n}))}function r(e){const n=e.getBoundingClientRect();return n.top===n.bottom?r(e.parentNode):n}function a(e,n){let{anchorTopOffset:s}=n;const i=e.find((e=>r(e).top>=s));if(i){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(r(i))?i:e[e.indexOf(i)-1]??null}return e[e.length-1]??null}function o(){const e=(0,i.useRef)(0),{navbar:{hideOnScroll:n}}=(0,t.p)();return(0,i.useEffect)((()=>{e.current=n?0:document.querySelector(".navbar").clientHeight}),[n]),e}function d(e){const n=(0,i.useRef)(void 0),s=o();(0,i.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:i,linkActiveClassName:t,minHeadingLevel:l,maxHeadingLevel:c}=e;function r(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(i),r=function(e){let{minHeadingLevel:n,maxHeadingLevel:s}=e;const i=[];for(let t=n;t<=s;t+=1)i.push(`h${t}.anchor`);return Array.from(document.querySelectorAll(i.join()))}({minHeadingLevel:l,maxHeadingLevel:c}),o=a(r,{anchorTopOffset:s.current}),d=e.find((e=>o&&o.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,s){s?(n.current&&n.current!==e&&n.current.classList.remove(t),e.classList.add(t),n.current=e):e.classList.remove(t)}(e,e===d)}))}return document.addEventListener("scroll",r),document.addEventListener("resize",r),r(),()=>{document.removeEventListener("scroll",r),document.removeEventListener("resize",r)}}),[e,s])}var h=s(8774),u=s(4848);function m(e){let{toc:n,className:s,linkClassName:i,isChild:t}=e;return n.length?(0,u.jsx)("ul",{className:t?void 0:s,children:n.map((e=>(0,u.jsxs)("li",{children:[(0,u.jsx)(h.A,{to:`#${e.id}`,className:i??void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,u.jsx)(m,{isChild:!0,toc:e.children,className:s,linkClassName:i})]},e.id)))}):null}const x=i.memo(m);function p(e){let{toc:n,className:s="table-of-contents table-of-contents__left-border",linkClassName:r="table-of-contents__link",linkActiveClassName:a,minHeadingLevel:o,maxHeadingLevel:h,...m}=e;const p=(0,t.p)(),j=o??p.tableOfContents.minHeadingLevel,v=h??p.tableOfContents.maxHeadingLevel,f=function(e){let{toc:n,minHeadingLevel:s,maxHeadingLevel:t}=e;return(0,i.useMemo)((()=>c({toc:l(n),minHeadingLevel:s,maxHeadingLevel:t})),[n,s,t])}({toc:n,minHeadingLevel:j,maxHeadingLevel:v});return d((0,i.useMemo)((()=>{if(r&&a)return{linkClassName:r,linkActiveClassName:a,minHeadingLevel:j,maxHeadingLevel:v}}),[r,a,j,v])),(0,u.jsx)(x,{toc:f,className:s,linkClassName:r,...m})}},6012:(e,n,s)=>{s.d(n,{A:()=>t});s(6540);var i=s(4848);function t(e){let{children:n,color:s}=e;return(0,i.jsx)("span",{style:{backgroundColor:s,borderRadius:"4px",color:"#fff",padding:"0.2rem 0.5rem",fontWeight:"bold"},children:n})}},525:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/ec2-types-6c50048cae85c1c9d94ded3f27d81b2a.png"},5104:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/sg-ec2-c2e8963e71de6123858503b82d94730f.png"},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>r});var i=s(6540);const t={},l=i.createContext(t);function c(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);